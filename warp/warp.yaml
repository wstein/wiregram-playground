# Warp project configuration (schema draft)
version: 1

language:
  source: ruby
  target: crystal
  ruby_version: "3.4"
  crystal_version: "1.9"

formatter:
  mode: preserve # preserve | normalize
  indent: 2
  newline: "\n"

linter:
  enable: true
  rules:
    - name: "layout/spacing"
      enabled: true
    - name: "style/naming"
      enabled: true

transpiler:
  reversible: true
  lossy_rules:
    - "eval"
    - "refinements"
  sorbet:
    inline: true
    sigils: true

mappings:
  libraries:
    FileUtils: FileUtils
    JSON: JSON
  namespaces:
    Net::HTTP: HTTP::Client
  classes:
    OpenStruct: OpenStruct

# Standard library mappings for require statements
# Crystal require names → Ruby require names
stdlib_mappings:
  # Testing libraries
  spec: rspec # Crystal `require "spec"` → Ruby `require "rspec"`

  # Data formats
  json: json # Both use same name
  yaml: yaml # Both use same name

  # Collections and data structures
  set: set # Both use same name

  # Utilities
  http: net/http # Crystal HTTP → Ruby Net::HTTP
  socket: socket # Both use same name
  io: io # Both use same name
  time: time # Both use same name
  date: date # Both use same name
  digest: digest # Both use same name

  # Concurrency
  fiber: fiber # Crystal Fiber → Ruby Fiber (different semantics but same name)

  # File operations
  file_utils: fileutils # Crystal FileUtils → Ruby FileUtils (case-insensitive)

  # String processing
  string_scanner: strscan # Crystal StringScanner → Ruby StringScanner (strscan gem)

  # Regular expressions
  regex: regexp # Both support regex
